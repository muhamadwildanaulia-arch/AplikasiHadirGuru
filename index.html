<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>WebsiteHadir â€¢ SDN Muhara</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>

  <!-- Firebase (Compat) -->
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-database-compat.js"></script>

  <link rel="icon" href="Logo.png">
</head>
<body class="antialiased bg-slate-50 text-slate-800">

  <div class="min-h-screen flex">

    <!-- Sidebar -->
    <aside class="bg-gradient-to-b from-red-900 to-red-700 w-64 p-5 hidden md:flex flex-col text-white">
      <div class="flex items-center gap-3 mb-6">
        <img src="Logo.png" class="w-12 h-12 bg-white rounded-md p-1">
        <div>
          <div class="font-bold">SDN Muhara</div>
          <div class="text-sm text-red-200">WebsiteHadir â€¢ Dashboard</div>
        </div>
      </div>

      <nav class="flex-1 space-y-2">
        <button data-page="kehadiran" class="block w-full text-left py-2 px-3 rounded hover:bg-white/10">ğŸ“¥ Isi Kehadiran</button>
        <button data-page="dashboard" class="block w-full text-left py-2 px-3 rounded hover:bg-white/10">ğŸ“Š Dashboard</button>
        <button data-page="guru" class="block w-full text-left py-2 px-3 rounded hover:bg-white/10">ğŸ‘©â€ğŸ« Data Guru</button>
        <button data-page="laporan" class="block w-full text-left py-2 px-3 rounded hover:bg-white/10">ğŸ“… Laporan Bulanan</button>
      </nav>
      <div class="text-xs text-red-200 mt-auto">Versi 2025</div>
    </aside>

    <!-- Main Content -->
    <div class="flex-1 flex flex-col">

      <!-- Header -->
      <header class="flex justify-between items-center bg-white/80 border-b border-slate-200 px-4 py-3 sticky top-0 z-40 backdrop-blur">
        <div>
          <div id="current-date-top" class="text-sm text-slate-500"></div>
          <h1 class="text-lg font-semibold">Dashboard Kehadiran</h1>
        </div>
        <div class="flex gap-4 items-center">
          <div id="clock-small" class="text-sm text-slate-500"></div>
          <button id="btn-open-admin" class="bg-rose-600 text-white px-3 py-1 rounded">Login Admin</button>
          <button id="btn-admin-logout" class="text-sm text-slate-600 underline hidden">Logout</button>
        </div>
      </header>

      <!-- Content -->
      <main class="flex-1 p-6 max-w-7xl mx-auto">

        <!-- Isi Kehadiran -->
        <section id="page-kehadiran">
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <div class="bg-white rounded-xl shadow p-6">
              <h2 class="text-xl font-semibold mb-3">ğŸ“¥ Isi Kehadiran Guru</h2>
              <p class="text-sm text-slate-500 mb-4">Pilih nama lalu kirim kehadiran. Guru tidak perlu login.</p>

              <div class="space-y-4">
                <div>
                  <label class="block text-sm mb-1">Nama Guru</label>
                  <select id="namaGuru" class="w-full border rounded p-2"></select>
                </div>

                <div>
                  <label class="block text-sm mb-1">Status Kehadiran</label>
                  <select id="statusKehadiran" class="w-full border rounded p-2">
                    <option value="">-- Pilih Status --</option>
                    <option value="Hadir">Hadir</option>
                    <option value="Izin">Izin</option>
                    <option value="Sakit">Sakit</option>
                    <option value="Dinas Luar">Dinas Luar</option>
                  </select>
                </div>

                <div>
                  <label class="block text-sm mb-1">Lokasi (otomatis)</label>
                  <input id="lokasi" readonly class="w-full border rounded p-2 bg-slate-50" placeholder="ğŸ“ Menentukan lokasi..." />
                </div>

                <button id="kirimKehadiranBtn" class="bg-rose-600 hover:bg-rose-700 text-white px-4 py-2 rounded">ğŸš€ Kirim Kehadiran</button>
                <div id="kehadiran-status" class="text-sm text-slate-500">â€”</div>
              </div>
            </div>

            <div class="bg-white rounded-xl shadow p-6">
              <h3 class="font-semibold mb-2">Grafik Kehadiran Hari Ini</h3>
              <canvas id="chartDashboard" height="200"></canvas>
            </div>
          </div>
        </section>

        <!-- Dashboard -->
        <section id="page-dashboard" class="hidden">
          <p class="text-slate-500">ğŸ“Š Fitur dashboard menyusul di sini.</p>
        </section>

        <!-- Data Guru -->
        <section id="page-guru" class="hidden">
          <h2 class="text-xl font-semibold mb-3">ğŸ‘©â€ğŸ« Data Guru</h2>
          <div class="bg-white rounded-xl shadow p-4 overflow-auto">
            <table class="min-w-full text-sm">
              <thead class="bg-rose-50 text-rose-700 font-semibold">
                <tr>
                  <th class="border p-2 text-left">NIP</th>
                  <th class="border p-2 text-left">Nama</th>
                  <th class="border p-2 text-left">Jabatan</th>
                </tr>
              </thead>
              <tbody id="guruTableBody">
                <tr><td colspan="3" class="text-center p-4 text-slate-500">Memuat data...</td></tr>
              </tbody>
            </table>
          </div>
        </section>

        <!-- Laporan -->
        <section id="page-laporan" class="hidden">
          <h2 class="text-xl font-semibold mb-3">ğŸ“… Laporan Bulanan</h2>
          <p class="text-slate-500">Masih dalam pengembangan.</p>
        </section>
      </main>
    </div>
  </div>

  <script type="module" src="app.firebase.js"></script>
</body>
</html>
